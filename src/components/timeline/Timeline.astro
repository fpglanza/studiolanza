---
import Container from "../layout/Container.astro";
import TimelineYear from "./TimelineYear.astro";
import timeline from "../../content/timeline.json";
---
<section class="py-16 md:py-24">
  <Container>
    <header class="mb-14 md:mb-20">
      <p class="text-sm tracking-wide text-zinc-600">studiolanza</p>
      <h1 class="mt-3 text-3xl md:text-5xl font-medium tracking-tight">
        immagine e comunicazione
      </h1>
      <p class="mt-6 max-w-2xl text-base md:text-lg leading-relaxed text-zinc-700">
        Selezione di lavori attraverso oltre vent’anni di pratica, raccontati per continuità.
      </p>
    </header>

    <div class="relative">
      <div class="pointer-events-none absolute left-3 top-0 h-full w-px bg-zinc-200 md:left-4"></div>

      <ol class="space-y-14 md:space-y-20">
        {timeline.map((block) => (
          <li>
            <TimelineYear year={block.year} projects={block.projects} />
          </li>
        ))}
      </ol>
    </div>
  </Container>
</section>

<script>
  const items = document.querySelectorAll("[data-reveal]");
  const io = new IntersectionObserver(
    (entries) => {
      for (const e of entries) {
        if (e.isIntersecting) {
          e.target.classList.add("is-visible");
          io.unobserve(e.target);
        }
      }
    },
    { threshold: 0.15 }
  );
  items.forEach((el) => io.observe(el));
</script>

<style>
  [data-reveal] {
    opacity: 0;
    transform: translateY(12px);
    transition: opacity 220ms ease, transform 220ms ease;
  }
  [data-reveal].is-visible {
    opacity: 1;
    transform: translateY(0);
  }
</style>
